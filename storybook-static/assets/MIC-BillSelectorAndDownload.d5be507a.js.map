{"version":3,"file":"MIC-BillSelectorAndDownload.d5be507a.js","sources":["../../src/lib/Components/MIC-BillSelectorAndDownload.svelte"],"sourcesContent":["<svelte:options tag=\"mic-billselector\" />\n\n<script>\n  // @ts-nocheck\n\n  import {\n    fetchstore,\n    changeBillNumber,\n    fetchAndRedirect,\n    billNumber,\n    reGenerateToken,\n    apiDomain,\n    apiToken,\n    latestBill,\n    newToken,\n    persona,\n    SAPToken,\n    isSummaryAccountFlag,\n    generatedFromTable\n  } from \"../../js/store\";\n  import { useLazyImage as lazyImage } from \"svelte-lazy-image\";\n  // state\n  let selectedBill;\n  let selectedLabelBill;\n  let mainClass = \"\";\n  //mocking data\n  const [data, loading, error, get] = fetchstore();\n  const [dataToken, loadingToken, errorToken, getToken] = reGenerateToken();\n\n  // $: if ($apiDomain && $apiToken && $SAPToken && !$data.bills) {\n    if ($isSummaryAccountFlag.toLowerCase() == \"true\") {\n      mainClass = \"col-account\";\n    }\n    get(\n      $apiToken,\n      \"../../data/BillSelector.json\",\n      // `${$apiDomain}/api/ibill/webcomponents/v1/Post/BillSelector`,\n      $SAPToken\n    );\n  // }\n\n  const handleChange = (e, latest1) => {\n    if (latest1 && $billNumber !== $latestBill) {\n      selectedBill = latest1;\n      newToken.set(\"\");\n      getToken(\n        $apiToken,\n        // \"../../data/Token.json\"\n        `${$apiDomain}/api/ibill/webcomponents/v1/Post/GenerateNewToken?SelectedBill=${selectedBill}`,\n        $SAPToken\n      ).then(() => {\n        changeBillNumber(selectedBill);\n        fetchAndRedirect(\n          $apiToken,\n          `${$apiDomain}/rest/restmijourney/v1/CreateEvent`,\n          null,\n          {\n            EventCode: \"Select_Latest_Bill\",\n            Outcome: $billNumber,\n            Persona: $persona,\n          }\n        );\n      });\n    } else if (!latest1) {\n      selectedBill = e.target.value;\n      newToken.set(\"\");\n      getToken(\n        $apiToken,\n        // \"../../data/Token.json\"\n        `${$apiDomain}/api/ibill/webcomponents/v1/Post/GenerateNewToken?SelectedBill=${selectedBill}`,\n        $SAPToken\n      ).then(() => {\n        changeBillNumber(selectedBill);\n        fetchAndRedirect(\n          $apiToken,\n          `${$apiDomain}/rest/restmijourney/v1/CreateEvent`,\n          null,\n          {\n            EventCode: \"Select_New_Bill\",\n            Outcome: $billNumber,\n            Persona: $persona,\n          }\n        );\n      });\n    }\n    generatedFromTable.set(false);\n  };\n\n  $: if ($data.bills) {\n    if ($data.bills[0]) {\n      let latest = $data.bills[0].value;\n      latestBill.set(latest);\n    }\n    if (!selectedBill) {\n      if ($data.bills.filter((bill) => bill.value == $data.selectedBill)[0]) {\n        selectedLabelBill = $data.bills.filter(\n          (bill) => bill.value == $data.selectedBill\n        )[0];\n        changeBillNumber($data.selectedBill);\n      } else {\n        changeBillNumber($data.bills[0].value);\n      }\n    }\n  }\n  let btnStatus;\n  $: if ($persona && $persona == \"Agent\") {\n    btnStatus = \"disable\";\n  } else {\n    btnStatus = \"enable\";\n  }\n</script>\n\n{#if $loading}\n  <mic-loading />\n{:else if $error}\n  <mic-render-error />\n{:else if $data && $data.bills}\n  <div\n    class=\"tecoGenericShadow roundedRadius20 tecoWhiteBG tecoCard {mainClass}\"\n  >\n    <div class=\"tecoBillSelector-v2\">\n      <div class=\"tecoInfoLabel\">\n        <h4>VIEW PRIOR STATEMENTS</h4>\n      </div>\n      <div class=\"tecobillSelectorDetailRow\">\n        <div\n          class=\"tecoBillSelect spacing-outer-bottom-none form-group no-columns\"\n        >\n          {#if $data && $data.bills}\n            <select\n              class=\"form-control\"\n              id=\"68.Teco.BuildingBlocksShowcase.referenceSelector1_pkj_53\"\n              aria-label=\"\"\n              on:change={(e) => {\n                handleChange(e);\n              }}\n              bind:value={$billNumber}\n            >\n              {#each $data.bills as billDate}\n                {#if selectedLabelBill == billDate.value}\n                  <option\n                    name=\"bill-selector\"\n                    selected\n                    value={$data.selectedBill}>{selectedLabelBill.lable}</option\n                  >\n                {:else}\n                  <option name=\"bill-selector\" value={billDate.value}\n                    >{billDate.lable}</option\n                  >\n                {/if}\n              {/each}\n            </select>\n          {/if}\n        </div>\n        <div class=\"tecoBillSelectorDownloadContainer\">\n          <div class=\"tecoInfoLabel\">\n            <h4>DOWNLOAD MY BILL</h4>\n          </div>\n          <button\n            type=\"button\"\n            class=\"btn tecoBillSelectorDownloadButton {btnStatus}\"\n            id=\"btn-download\"\n            on:click={() => {\n              if (btnStatus == \"enable\") {\n                fetchAndRedirect(\n                  $apiToken,\n                  `${$apiDomain}/rest/restmijourney/v1/CreateEvent`,\n                  `${$data.download_link}${$billNumber}`,\n                  {\n                    EventCode: \"Bill_Download\",\n                    Outcome: $billNumber,\n                  }\n                );\n              } else {\n                return;\n              }\n            }}\n          >\n            <img\n              src={`https://tecocdn.azureedge.net/ibill/iBill-assets/DownloadIcon.svg`}\n              alt=\"DI\"\n              use:lazyImage\n            />DOWNLOAD BILL\n          </button>\n        </div>\n        <div class=\"tecoBillSelectorSmallText\">\n          <span>\n            <!-- svelte-ignore a11y-missing-attribute -->\n            <!-- svelte-ignore a11y-click-events-have-key-events -->\n            <a\n              on:click={(e) => {\n                if ($data.bills[0]) {\n                  handleChange(e, $data.bills[0].value);\n                }\n              }}>View Latest Bill</a\n            >\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n{:else}\n  <h1 />\n{/if}\n\n<style lang=\"scss\">\n  // Typography\n  $teco-font-family: \"Interstate\";\n  // Colors\n  $teco-white: #ffffff;\n  $teco-midnight-blue: #00294a;\n  $teco-blue: #005faa;\n  $teco-ocean-blue: #5eb0f4;\n  $teco-yellow: #ffdc00;\n  $teco-green: #24a148;\n  $teco-red: #da1e28;\n  $teco-dark-grey: #6c6c6c;\n  $screen-md-min: 991px;\n  $screen-custom-md-min: 1024px;\n  $screen-lg-min: 1200px;\n  * {\n    margin: 0;\n    box-sizing: border-box;\n  }\n  .tecoLayout {\n    font-family: $teco-font-family;\n    background-color: whitesmoke;\n    ::-webkit-scrollbar {\n      width: 7px;\n      height: 7px;\n    }\n    /* Track */\n    ::-webkit-scrollbar-track {\n      background: #f1f1f1;\n    }\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n      background: rgb(187, 187, 187);\n      border-radius: 3px;\n    }\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n      background: #888;\n    }\n  }\n  .tecoPrimaryBG {\n    background-color: $teco-blue;\n  }\n  .tecoYellowBG {\n    background-color: $teco-yellow;\n  }\n  .tecoWhiteBG {\n    background-color: $teco-white;\n  }\n  .tecoPrimaryColor {\n    color: $teco-blue;\n  }\n  .tecoOceanBlue {\n    color: $teco-ocean-blue;\n  }\n  .tecoMidnightBlue {\n    color: $teco-midnight-blue;\n  }\n  .tecoGreenColor {\n    color: $teco-green;\n  }\n  .tecoRedColor {\n    color: $teco-red;\n  }\n  .tecoGrayColor {\n    color: grey;\n  }\n  .tecoGrayedLabel {\n    color: grey;\n  }\n  .pointer {\n    cursor: pointer;\n  }\n  .tecoBolder {\n    font-weight: 600 !important;\n  }\n  .marginReset {\n    margin: 0 !important;\n  }\n  .paddingReset {\n    padding: 0 !important;\n  }\n  .roundedTop {\n    border-radius: 7px 7px 0 0;\n  }\n  .roundedBottom {\n    border-radius: 0 0 7px 7px;\n  }\n  .tecoGenericShadow {\n    box-shadow: 0px 0px 10px rgba(34, 34, 34, 0.24);\n  }\n  .roundedRadius20 {\n    border-radius: 20px;\n  }\n  .reverseOrder {\n    direction: rtl;\n  }\n  .m_1 {\n    margin-top: 10px;\n  }\n\n  // teco cards\n  .tecoCard {\n    margin: 0 !important;\n    padding: 15px;\n    container-type: inline-size;\n    width: calc(66% - 30px);\n    @media screen and (max-width: 992px) {\n      width: 100%;\n    }\n  }\n  // web component \"tecoBillSelector\" style\n  @media screen and (min-width: 992px) {\n    .col-account {\n      width: 100% !important;\n      .tecoBillSelector-v2 {\n        font-weight: 400;\n        display: flex;\n        gap: 10px;\n        align-items: center;\n        flex-direction: row;\n        .tecoInfoLabel h4 {\n          color: $teco-dark-grey;\n        }\n        .tecobillSelectorDetailRow {\n          width: unset;\n          flex-grow: 1;\n        }\n        .tecoBillSelectorDownloadContainer {\n          &::before {\n            content: \"DOWNLOAD MY BILL\";\n            color: $teco-dark-grey;\n            font-weight: 400;\n          }\n        }\n      }\n    }\n  }\n  .tecoBillSelector-v2 {\n    font-weight: 400;\n    display: flex;\n    align-items: start;\n    flex-direction: column;\n    gap: 10px;\n    flex-wrap: wrap;\n    .tecoInfoLabel h4 {\n      font-weight: 400;\n      color: $teco-blue;\n      width: max-content;\n      display: block;\n    }\n    .tecobillSelectorDetailRow {\n      display: flex;\n      gap: 15px;\n      justify-content: space-between;\n      align-items: center;\n      width: 100%;\n    }\n    .tecoBillSelect {\n      max-width: 250px;\n      width: 100%;\n      flex: revert;\n      select {\n        font-size: 15px;\n        border: 2px solid $teco-blue;\n        width: 100%;\n        padding: 6px 10px;\n        border-radius: 6px;\n      }\n    }\n    .tecoBillSelectorSmallText {\n      a {\n        text-decoration: none;\n        text-transform: uppercase;\n      }\n      cursor: pointer;\n      border-bottom: 2px solid $teco-blue;\n    }\n    .tecoBillSelectorDownloadContainer {\n      display: flex;\n      gap: 10px;\n      justify-content: center;\n      align-items: center;\n      > .tecoInfoLabel {\n        > h4 {\n          display: none;\n        }\n      }\n    }\n\n    .tecoBillSelectorDownloadButton {\n      #btn-download {\n        font-style: normal;\n        font-weight: 400;\n        font-size: 16px;\n        line-height: 19px;\n        color: $teco-blue;\n      }\n      & > span {\n        color: $teco-blue;\n      }\n      padding: 6px 10px;\n      border-radius: 6px;\n      color: $teco-blue;\n      border-color: $teco-blue;\n      display: flex;\n      gap: 4px;\n      justify-content: center;\n      align-items: center;\n      background: white;\n      min-width: max-content;\n      cursor: pointer;\n      &:hover {\n        color: #145093;\n        border-color: #145093;\n      }\n      &:active {\n        background: #e5eff6;\n      }\n    }\n    .disable {\n      color: #6c6c6c;\n      border-color: #6c6c6c;\n      cursor: default;\n      &:hover {\n        color: #6c6c6c;\n        border-color: #6c6c6c;\n        background: none !important;\n      }\n      &:active {\n        color: #6c6c6c;\n        border-color: #6c6c6c;\n        background: none !important;\n      }\n      img {\n        filter: grayscale(100%);\n      }\n    }\n    // small container\n    @media screen and (max-width: 767px) {\n      text-align: center !important;\n      gap: 10px;\n      align-items: center;\n      .tecoInfoLabel h4 {\n        color: $teco-dark-grey;\n        text-align: center;\n        width: 100%;\n        display: block !important;\n        margin: 0;\n      }\n      .tecoBillSelectorDownloadButton {\n        img {\n          display: none;\n        }\n      }\n      .tecobillSelectorDetailRow {\n        gap: 20px !important;\n        margin-top: 20px;\n        flex-direction: column;\n      }\n      .tecoBillSelectorSmallText {\n        width: fit-content;\n        margin: auto;\n      }\n      .tecoBillSelectorDownloadContainer {\n        flex-direction: column;\n      }\n      .tecoBillSelectorDownloadButton {\n        width: 100%;\n        & > span {\n          display: none;\n        }\n      }\n    }\n    // too large\n    // @media screen and (min-width: 1024px) {\n    //   flex-direction: row;\n    //   justify-content: space-between;\n    //   align-items: center;\n    //   .tecoBillSelect {\n    //     width: 250px;\n    //   }\n    //   .tecoInfoLabel {\n    //     margin-right: 4%;\n    //     h4 {\n    //       color: $teco-dark-grey;\n    //       display: block !important;\n    //       margin: 0;\n    //     }\n    //   }\n    //   .tecobillSelectorDetailRow {\n    //     flex-grow: 2;\n    //     width: unset;\n    //   }\n    // }\n    a {\n      text-decoration: none;\n      color: $teco-dark-grey;\n    }\n  }\n</style>\n"],"names":["insert","target","h1","anchor","ctx","create_if_block_3","div7","append","div6","div0","div5","div1","div3","div2","button","img","div4","span","a","mic_render_error","mic_loading","each_value","i","add_render_callback","select","t_value","option","option_value_value","dirty","set_data","t","create_if_block_4","create_if_block","create_if_block_1","create_if_block_2","selectedBill","selectedLabelBill","mainClass","data","loading","error","get","fetchstore","dataToken","loadingToken","errorToken","getToken","reGenerateToken","$isSummaryAccountFlag","$apiToken","$SAPToken","handleChange","e","latest1","$billNumber","$latestBill","$$invalidate","newToken","$apiDomain","changeBillNumber","fetchAndRedirect","$persona","generatedFromTable","btnStatus","select_value","$data","latest","latestBill","bill"],"mappings":"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"}