{"version":3,"file":"MIC-ImportantMessage.48eeb4a7.js","sources":["../../src/lib/Components/MIC-ImportantMessage.svelte"],"sourcesContent":["<svelte:options tag=\"mic-importentmessage\" />\n\n<script>\n  // @ts-nocheck\n  import MicImportantMessagesDetails from \"./MIC-ImportantMessagesDetails.svelte\";\n  import { useLazyImage as lazyImage } from \"svelte-lazy-image\";\n\n  //unreaded messages counter\n  import {\n    fetchstore,\n    apiToken,\n    apiDomain,\n    eventsDomain,\n    assetsUrl,\n    generalErr,\n    SAPToken,\n  } from \"../../js/store\";\n  import { onMount } from \"svelte\";\n  import data1 from \"../../../data/messages.json\";\n  //state\n  let state = {};\n  let message;\n  let isOpen = true;\n  let svgId = \"rotate-svg-\" + isOpen;\n\n  const [data, loading, error, get] = fetchstore();\n  onMount(() => {\n    // if ($apiToken && $SAPToken && !$data.messages && $generalErr !== true) {\n    // get(\n    //   $apiToken,\n    //   // `${$apiDomain}/api/ibill/webcomponents/v1/Post/ImportantMessages`,\n    //   \"../../data/messages.json\",\n    //   $SAPToken\n    // );\n    // }\n    $data = data1;\n    state = $data;\n  });\n\n  // $: if ($data && $data.messages) {\n  //   state = $data;\n  // }\n  //hello fro\n  //slice long message\n  $: if (\n    state &&\n    state.messages &&\n    state.messages[0] &&\n    state.messages[0].message &&\n    state.messages[0].message.length &&\n    state.messages[0].message.length > 1000000\n  ) {\n    message =\n      state.messages[0].message.slice(0, 300 - state.messages[0].Title.length) +\n      \"...\";\n  } else if (\n    state &&\n    state.messages &&\n    state.messages[0] &&\n    state.messages[0].message &&\n    state.messages[0].message !== \"\"\n  ) {\n    message = state.messages[0].message;\n  } else {\n    (\"\");\n  }\n  let cardStyle;\n  let contentStyle;\n  let footerStyle;\n  let msgDataStyle;\n  const toggle = () => {\n    isOpen = !isOpen;\n    svgId = \"rotate-svg-\" + isOpen;\n    if (isOpen === true) {\n      cardStyle = \"max-height: 200vh;opacity: 1;transition:200ms;\";\n      contentStyle = \" height: calc(100% - 120px);\";\n      footerStyle = \"height:50px\";\n    } else {\n      cardStyle = \"height: unset;margin: 0; transition:200ms;\";\n      contentStyle = \"height: 0;margin: 0; transition:200ms; \";\n      footerStyle = \"height:0\";\n    }\n  };\n</script>\n\n{#if $loading}\n  <mic-loading />\n{:else if $error}\n  Error: {$error}\n{:else if $data && $data.messages && state && state.messages && state.messages[0] && $generalErr !== true}\n  <div class=\"container\" style={cardStyle}>\n    <!-- svelte-ignore a11y-click-events-have-key-events -->\n    <div id=\"message-header\" on:click={toggle}>\n      <div class=\"message-counter\">\n        {#if message || (message && message !== \"\")}\n          <img\n            src={`https://tecocdn.azureedge.net/ibill/iBill-assets/envelope-solid.svg`}\n            alt=\"\"\n            use:lazyImage\n          />\n          <span id=\"unreaded-msgs\">&nbsp;{state.messages.length}&nbsp;</span>\n        {:else}\n          <img\n            src={`https://tecocdn.azureedge.net/ibill/iBill-assets/envelope-solid.svg`}\n            alt=\"\"\n            use:lazyImage\n          />\n          <span id=\"unreaded-msgs\">&nbsp;{0}&nbsp;</span>\n        {/if}\n      </div>\n      <h4 id=\"title\">Important Message</h4>\n      <img\n        src={`https://tecocdn.azureedge.net/ibill/iBill-assets/toggle.svg`}\n        alt=\"\"\n        id={svgId}\n        use:lazyImage\n      />\n    </div>\n    {#if state.messages}\n      {#if isOpen}\n        <div class=\"message-body\">\n          {#if message && message !== \"\"}\n            <div class=\"msg-data\">\n              {#if !state.messages[0].empty && state.messages[0] && (state.messages[0].Title !== \"\") !== \"\"}\n                <span>\n                  <p class=\"msg-title\">\n                    {state.messages[0].Title}\n                  </p>\n                  {#if state.messages[0].Title !== \"\"}\n                    <br />\n                  {/if}\n                  {@html message}\n                </span>\n              {:else}\n                <span>\n                  {@html message}\n                </span>\n              {/if}\n            </div>\n          {:else}\n            <p class=\"msg-data\" style=\"height: 105px; text-align: center;\">\n              No Messages\n            </p>\n          {/if}\n        </div>\n        <div class=\"message-footer\">\n          {#if state.messages[0].empty}\n            <span />\n          {:else}\n            <mic-messagesdetails messages={state.messages} />\n            <MicImportantMessagesDetails messages={state.messages} />\n          {/if}\n        </div>\n      {/if}\n    {/if}\n  </div>\n{/if}\n\n<style lang=\"scss\">\n  .container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    max-width: calc(100% - 40px);\n    padding: 20px;\n    transition: 0.3s;\n    border-radius: 16px;\n    box-shadow: 0px 0px 10px rgba(34, 34, 34, 0.24);\n    height: 340px;\n    background-color: white;\n    @media screen and (max-width: 830px) {\n      width: 100%;\n    }\n  }\n  #message-header {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n    padding: 0px;\n    width: 100%;\n    height: 40px;\n    cursor: pointer;\n\n    h4 {\n      font-weight: 300;\n      font-size: 20px;\n      line-height: 29px;\n      display: flex;\n      align-items: center;\n      letter-spacing: -0.02em;\n      text-transform: uppercase;\n      color: #005faa;\n      margin: 0;\n      text-align: center;\n      @media screen and (max-width: 480px) {\n        font-size: 18px;\n        display: flex;\n        flex-wrap: wrap;\n      }\n    }\n  }\n\n  .message-counter {\n    position: relative;\n  }\n  #unreaded-msgs {\n    position: absolute;\n    right: -10px;\n    top: -8px;\n    color: #ffffff;\n    background: #da1e28;\n    border-radius: 50%;\n    border: 2px solid white;\n    width: 20px;\n    height: 20px;\n    /* text-align: center; */\n    font-size: 12px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .message-body {\n    width: 100%;\n    margin: 14px 0;\n    height: 222px;\n  }\n  .msg-data {\n    font-weight: 300;\n    font-size: 20px;\n    color: rgb(0, 0, 0);\n    height: 216px;\n    @media screen and (max-width: 480px) {\n      font-size: 18px !important;\n    }\n    > span {\n      display: -webkit-box !important;\n      -webkit-box-orient: vertical !important;\n      -webkit-line-clamp: 6 !important;\n      overflow: hidden !important;\n      line-height: 1.4;\n      p {\n        display: contents !important;\n      }\n      @media screen and (max-width: 480px) {\n        -webkit-line-clamp: 7 !important;\n      }\n    }\n  }\n  .msg-title {\n    font-weight: 700;\n    font-size: 20px;\n    letter-spacing: -0.02em;\n    color: #005faa;\n    height: 1.5rem;\n    &:empty {\n      /* Remove the style of the empty div */\n      display: none;\n      border: none;\n      padding: 0;\n      height: 0;\n    }\n  }\n  p {\n    margin: 0;\n  }\n  button {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-end;\n    padding: 10px 24px;\n    gap: 10px;\n    width: 93px;\n    height: 50px;\n    background: #005faa;\n    border-radius: 6px;\n  }\n  button span {\n    width: 45px;\n    height: 30px;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 20px;\n    line-height: 30px;\n    display: flex;\n    align-items: center;\n    text-align: center;\n    color: #ffffff;\n  }\n\n  .message-footer {\n    height: auto;\n    display: flex;\n    flex-direction: row-reverse;\n    width: 100%;\n    overflow: hidden;\n  }\n\n  /* acordion style */\n  #btn-toggle {\n    border: none;\n    background: none;\n    display: block;\n    color: inherit;\n    font-size: 36px;\n    cursor: pointer;\n    margin: 0;\n    padding-bottom: 0.5em;\n    padding-top: 0.5em;\n    width: 4rem;\n  }\n\n  #rotate-svg-true {\n    transition: transform 0.2s ease-in;\n    transform: rotate(0turn);\n  }\n\n  #rotate-svg-false {\n    transition: transform 0.2s ease-in;\n    transform: rotate(0.5turn);\n  }\n</style>\n"],"names":["ctx","create_if_block_9","if_block1","create_if_block_3","insert","target","div2","anchor","append","div1","div0","h4","img","mic_loading","span","set_data","t2","t2_value","create_if_block_4","create_if_block_6","p","create_if_block_7","div","t0_value","if_block","create_if_block_8","dirty","t0","br","set_custom_element_data","mic_messagesdetails","mic_messagesdetails_messages_value","current","micimportantmessagesdetails_changes","state","message","isOpen","svgId","data","loading","error","get","fetchstore","onMount","set_store_value","$data","data1","$$invalidate","cardStyle","toggle"],"mappings":"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"}