{"version":3,"file":"MIC-BalanceSummary.7c641984.js","sources":["../../src/lib/Components/MIC-BalanceSummary.svelte"],"sourcesContent":["<svelte:options tag=\"mic-balancesummary\" />\n\n<script>\n  // @ts-nocheck\n  import { onMount } from \"svelte\";\n  import { useLazyImage as lazyImage } from \"svelte-lazy-image\";\n  import {\n    fetchstore,\n    apiDomain,\n    apiToken,\n    fetchAndRedirect,\n    eventsDomain,\n    persona,\n    SAPToken,\n  } from \"../../js/store\";\n  import dataJson from \"../../../data/AccountBalanceData.json\";\n  var newElement;\n  let color;\n  let tries = 3;\n  let btnStatus;\n  let totalAmmountFontSize = \"64px\";\n  let subTotalAmmountFontSize = \"32px\";\n  let absTotalAmmount;\n\n  //mocking data\n  const [data, loading, error, get] = fetchstore();\n  // trigger token existence\n  onMount(() => {\n    // if (\n    //   $apiDomain &&\n    //   $SAPToken &&\n    //   $apiToken &&\n    //   !$data.html_masseges &&\n    //   tries > 0\n    // ) {\n    $data = dataJson;\n    // get(\n    //   $apiToken,\n    //   \"../../../data/AccountBalanceData.json\",\n    //   // `${$apiDomain}/api/ibill/webcomponents/v1/Post/BalanceSummary`,\n    //   $SAPToken\n    // );\n    tries--;\n    // }\n  });\n\n  $: if ($persona && $persona == \"Agent\") {\n    btnStatus = \"disable\";\n  } else {\n    btnStatus = \"enable\";\n  }\n  $: newElement = document.getElementById(\"info-container\"); // trigger \"info-container\" mounting\n  $: if (newElement && $data && $data.html_masseges) {\n    // create elements fro html_masseges\n    for (let i = 0; i < $data.html_masseges.length; i++) {\n      let subEle = document.createElement(\"div\");\n      if (i > 0)\n        // add border\n        subEle.setAttribute(\n          \"style\",\n          \"border-top: solid 2px #015faa; padding-top:20px;  margin-top:20px;\"\n        );\n      //trigger the font family and change it to \"Interstate\":\n      let start = $data.html_masseges[i].message.indexOf(\"family:\");\n      let end = $data.html_masseges[i].message.indexOf(\"serif\", start);\n      if (start > 0 && end > 0) {\n        let result = $data.html_masseges[i].message.substring(start, end + 5);\n        let formattedHtml = $data.html_masseges[i].message.replace(\n          result,\n          \"family:Interstate\"\n        );\n        subEle.innerHTML = formattedHtml;\n      } else {\n        subEle.innerHTML = $data.html_masseges[i].message;\n      }\n      newElement.appendChild(subEle);\n    }\n    // dynamic totalAmmount colors\n    if ($data.totalAmmount.includes(\"-\")) {\n      color = \"#24A148\";\n\n      absTotalAmmount = parseFloat(\n        $data.totalAmmount?.split(\",\").join(\"\")\n      ).toFixed(2);\n      absTotalAmmount = Math.abs(absTotalAmmount);\n    } else {\n      absTotalAmmount = $data.totalAmmount;\n      color = \"#005FAA\";\n    }\n    // dynamic font size\n    if ($data.totalAmmount[0] && $data.totalAmmount.split(\".\")[0].length >= 7) {\n      totalAmmountFontSize = \"36px\";\n      subTotalAmmountFontSize = \"20px\";\n    }\n  }\n</script>\n\n{#if $loading}\n  <mic-loading />\n{:else if $error}\n  <!--error regarding to fetch-->\n  <mic-render-error />\n  <!-- {:else if $generalErr == true}\n    <div /> -->\n{:else if $data.html_masseges}\n  <div\n    class=\"tecoGenericShadow roundedRadius20 tecoWhiteBG tecoCard paddingReset\"\n  >\n    <div\n      class=\"tecoBalanceSum roundedRadius20\"\n      style=\"background-image:url({`https://tecocdn.azureedge.net/ibill/iBill-assets/mask-bs.svg`});\"\n      use:lazyImage\n    >\n      <div class=\"tecoBalanceSection\">\n        <span>Total Amount Due</span>\n        <div class=\"amount\">\n          {#if color == \"#24A148\"}\n            <span style=\"color: {color}; font-size:{subTotalAmmountFontSize}\"\n              >-$</span\n            >\n          {:else if color == \"#005FAA\"}\n            <span style=\"color: {color}; font-size:{subTotalAmmountFontSize}\"\n              >$</span\n            >\n          {/if}\n          {#if absTotalAmmount}\n            <span style=\"color: {color}; font-size:{totalAmmountFontSize}\"\n              >{absTotalAmmount.toLocaleString().split(\".\")[0]}</span\n            >\n          {/if}\n          {#if absTotalAmmount && absTotalAmmount\n              .toString()\n              .split(\".\")[1] && absTotalAmmount\n              .toString()\n              .split(\".\")[1].length >= 2}\n            <span style=\"color: {color}; font-size:{subTotalAmmountFontSize}\">\n              {absTotalAmmount.toString().split(\".\")[1]}</span\n            >\n          {:else if absTotalAmmount && absTotalAmmount\n              .toString()\n              .split(\".\")[1] && absTotalAmmount\n              .toString()\n              .split(\".\")[1].length < 2}\n            <span style=\"color: {color}; font-size:{subTotalAmmountFontSize}\">\n              {absTotalAmmount.toString().split(\".\")[1]}0</span\n            >\n          {:else}\n            <span style=\"color: {color}; font-size:{subTotalAmmountFontSize}\"\n              >00</span\n            >\n          {/if}\n        </div>\n        <div>\n          <span class=\"dueLabel\">Due Date: </span>\n          <span>{$data.dueDate}</span>\n        </div>\n        <div>\n          <button\n            type=\"button\"\n            class=\"payBtn btn {btnStatus} teco-btn-fill\"\n            on:click={() => {\n              if (btnStatus == \"enable\") {\n                fetchAndRedirect(\n                  $apiToken,\n                  `${$apiDomain}/rest/restmijourney/v1/CreateEvent`,\n                  $data.pay_now_link,\n                  {\n                    EventCode: \"Payment\",\n                    Outcome: \"\",\n                    Feedback: \"\",\n                    Persona: $persona,\n                  }\n                );\n              } else {\n                return;\n              }\n            }}>PAY NOW</button\n          >\n        </div>\n      </div>\n      <div\n        id=\"info-container\"\n        bind:this={newElement}\n        class=\"tecoMessagesSection\"\n      />\n    </div>\n  </div>\n  <!-- {:else if $generalErr == true}\n    <div /> -->\n{:else}\n  <h1 />\n{/if}\n\n<style lang=\"scss\">\n  // Colors\n  $teco-white: #ffffff;\n  $teco-background-color: #f4f5f7;\n  $teco-light-gray: #eaecee;\n  $teco-light-blue: #e6eff7;\n  $teco-baby-blue: #b1dbfd;\n  $teco-midnight-blue: #00294a;\n  $teco-sky-blue: #00b6f0;\n  $teco-ocean-blue: #5eb0f4;\n  $teco-yellow: #ffdc00;\n  $teco-orange: #ff832b;\n  $teco-green: #24a148;\n  $teco-red: #da1e28;\n  $teco-dark-grey: #6c6c6c;\n  $teco-yellow-shade: rgba(255, 210, 0, 0.15);\n  $teco-red-shade: rgba(218, 30, 40, 0.03);\n  $screen-md-min: 991px;\n  $screen-custom-md-min: 1024px;\n  $screen-lg-min: 1200px;\n  * {\n    margin: 0;\n    box-sizing: border-box;\n  }\n  ::-webkit-scrollbar {\n    width: 7px;\n    height: 7px;\n  }\n  /* Track */\n  ::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n  /* Handle */\n  ::-webkit-scrollbar-thumb {\n    background: rgb(187, 187, 187);\n    border-radius: 3px;\n  }\n  /* Handle on hover */\n  ::-webkit-scrollbar-thumb:hover {\n    background: #888;\n  }\n  .tecoPrimaryBG {\n    background-color: #005faa;\n  }\n  .tecoYellowBG {\n    background-color: $teco-yellow;\n  }\n  .tecoWhiteBG {\n    background-color: $teco-white;\n  }\n  .tecoPrimaryColor {\n    color: #005faa;\n  }\n  .tecoOceanBlue {\n    color: $teco-ocean-blue;\n  }\n  .tecoMidnightBlue {\n    color: $teco-midnight-blue;\n  }\n  .tecoGreenColor {\n    color: $teco-green;\n  }\n  .tecoRedColor {\n    color: $teco-red;\n  }\n  .tecoGrayColor {\n    color: grey;\n  }\n  .tecoGrayedLabel {\n    color: grey;\n  }\n  .pointer {\n    cursor: pointer;\n  }\n  .tecoBolder {\n    font-weight: 600 !important;\n  }\n  .marginReset {\n    margin: 0 !important;\n  }\n  .paddingReset {\n    padding: 0 !important;\n  }\n  .roundedTop {\n    border-radius: 7px 7px 0 0;\n  }\n  .roundedBottom {\n    border-radius: 0 0 7px 7px;\n  }\n  .tecoGenericShadow {\n    box-shadow: 0px 0px 10px rgba(34, 34, 34, 0.24);\n  }\n  .roundedRadius20 {\n    border-radius: 20px;\n  }\n  .reverseOrder {\n    direction: rtl;\n  }\n  .m_1 {\n    margin-top: 10px;\n  }\n  // .btn {\n  //     cursor: pointer;\n  // }\n  .tecoCard {\n    margin: 0 !important;\n    margin-top: 15px;\n    width: 100%;\n    @media (min-width: 767px) {\n      height: 380px;\n    }\n  }\n  .tecoBalanceSum {\n    background-position: 98%;\n    background-repeat: no-repeat;\n    background-size: cover;\n    display: flex;\n    justify-content: space-around;\n    flex-direction: row-reverse;\n    align-items: center;\n    min-height: 100%;\n    padding: 30px 15px;\n    .tecoBalanceSection {\n      width: 50%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      gap: 10px;\n      color: #005faa;\n      border-left: 2px solid #005faa;\n      .amount {\n        display: flex;\n        & :nth-child(1),\n        & :nth-child(3) {\n          font-size: 32px;\n        }\n        & :nth-child(2) {\n          font-size: 64px;\n        }\n      }\n      .enable {\n        color: $teco-white;\n        background-color: #005faa;\n        width: 145px;\n        border: none;\n        padding: 8px 18px;\n        border-radius: 6px;\n        cursor: pointer;\n        &:hover {\n          background-color: #145093;\n        }\n\n        &:active {\n          background-color: #004083;\n        }\n      }\n      .disable {\n        color: #adb3c0;\n        background-color: #fff;\n        width: 145px;\n        border: 2px solid #adb3c0;\n        padding: 8px 18px;\n        border-radius: 6px;\n      }\n    }\n    .tecoMessagesSection {\n      width: 50%;\n      display: flex;\n      flex-direction: column;\n      padding: 0 20px;\n      max-height: 320px;\n      overflow-y: auto;\n      .messageBox {\n        padding: 15px 0;\n        // quantity query to apply the style in case of 2 or more messages present\n        &:nth-last-child(n + 2),\n        &:nth-last-child(n + 2) ~ .messageBox {\n          border-top: 2px solid #005faa;\n        }\n        &:nth-last-child(n + 2),\n        &:nth-last-child(n + 2) ~ .messageBox:first-child {\n          border-top: none;\n        }\n        // end of quantity query\n        .messageLabel {\n          color: #005faa;\n          font-weight: 400;\n        }\n      }\n    }\n    // a {\n    //     text-decoration: none;\n    //     color: $teco-white;\n    // }\n    // small\n    @media (max-width: 600px) {\n      flex-direction: column;\n      .tecoBalanceSection {\n        width: 100%;\n        border-bottom: 2px solid #005faa;\n        border-left: none;\n        padding-bottom: 20px;\n        .amount {\n          & :nth-child(2) {\n            line-height: 1;\n          }\n        }\n      }\n      .tecoMessagesSection {\n        width: 100%;\n        display: flex;\n        flex-direction: column;\n        padding: unset;\n      }\n    }\n  }\n</style>\n"],"names":["insert","target","h1","anchor","t7_value","ctx","create_if_block_6","create_if_block_7","create_if_block_5","div6","append","div5","div3","span0","div0","div1","span1","span2","div2","button","div4","dirty","set_data","t7","mic_render_error","mic_loading","span","t_value","t0_value","t0","create_if_block","create_if_block_1","create_if_block_2","newElement","color","btnStatus","totalAmmountFontSize","subTotalAmmountFontSize","absTotalAmmount","data","loading","error","get","fetchstore","onMount","set_store_value","$data","dataJson","fetchAndRedirect","$apiToken","$apiDomain","$persona","$$value","$$invalidate","i","subEle","start","end","result","formattedHtml","_a"],"mappings":"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"}